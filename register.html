<!DOCTYPE html>
<html>
  <head>
    <title>Register - JeevanSetu ID</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans:wght@400;500;700;900&family=Public+Sans:wght@400;500;700;900" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body class="min-h-screen w-full bg-[#f8fafc] px-0" style='font-family: "Public Sans", "Noto Sans", sans-serif;'>
    <div class="w-full py-8 sm:py-16">
      <div class="flex flex-col items-center mb-8 w-full">
        <div class="size-10 mb-3">
          <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12.0799 24L4 19.2479L9.95537 8.75216L18.04 13.4961L18.0446 4H29.9554L29.96 13.4961L38.0446 8.75216L44 19.2479L35.92 24L44 28.7521L38.0446 39.2479L29.96 34.5039L29.9554 44H18.0446L18.04 34.5039L9.95537 39.2479L4 28.7521L12.0799 24Z" fill="#1993e5"></path>
          </svg>
        </div>
        <h2 class="text-3xl sm:text-4xl font-bold text-[#111518] w-full text-center">Register for JeevanSetu ID</h2>
      </div>
      <form class="flex flex-col gap-6 sm:gap-8 w-full max-w-md mx-auto px-4 sm:px-0" id="registerForm">
        <div>
          <label class="block text-sm font-medium text-[#111518] mb-1" for="name">Full Name</label>
          <input class="w-full rounded border border-[#dce1e5] px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#1993e5]" type="text" id="name" name="name" required />
        </div>
        <div>
          <label class="block text-sm font-medium text-[#111518] mb-1" for="email">Email</label>
          <input class="w-full rounded border border-[#dce1e5] px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#1993e5]" type="email" id="email" name="email" required />
        </div>
        <div>
          <label class="block text-sm font-medium text-[#111518] mb-1" for="password">Password</label>
          <input class="w-full rounded border border-[#dce1e5] px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#1993e5]" type="password" id="password" name="password" required />
        </div>
        <button type="submit" class="w-full bg-[#1993e5] text-white font-bold py-4 rounded-lg mt-2 hover:bg-[#157ac1] transition text-lg sm:text-xl">Register</button>
      </form>
      <div id="registerError" class="text-red-500 text-sm text-center mt-2 hidden"></div>
      <div class="text-center mt-4">
        <span class="text-sm text-[#637988]">Already have an account?</span>
        <a href="login.html" class="text-[#1993e5] text-sm font-medium ml-1 hover:underline">Login</a>
      </div>
    </div>
  </body>
  <script>
    document.getElementById('registerForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const errorDiv = document.getElementById('registerError');
      errorDiv.classList.add('hidden');
      try {
        const res = await fetch('/api/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, email, password })
        });
        const data = await res.json();
        if (res.ok) {
          localStorage.setItem('user', JSON.stringify({ name, email }));
          window.location.href = 'dashboard.html';
        } else {
          errorDiv.textContent = data.message || 'Registration failed.';
          errorDiv.classList.remove('hidden');
        }
      } catch (err) {
        errorDiv.textContent = 'Network error.';
        errorDiv.classList.remove('hidden');
      }
    });
  </script>
</html> 