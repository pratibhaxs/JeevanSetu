<!DOCTYPE html>
<html>
  <head>
    <title>Login - JeevanSetu ID</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans:wght@400;500;700;900&family=Public+Sans:wght@400;500;700;900" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body class="min-h-screen flex items-center justify-center bg-[#f8fafc] px-2 sm:px-0" style='font-family: "Public Sans", "Noto Sans", sans-serif;'>
    <div class="w-full max-w-xs sm:max-w-md bg-white rounded-lg shadow-lg p-4 sm:p-8">
      <div class="flex flex-col items-center mb-6">
        <div class="size-8 mb-2">
          <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12.0799 24L4 19.2479L9.95537 8.75216L18.04 13.4961L18.0446 4H29.9554L29.96 13.4961L38.0446 8.75216L44 19.2479L35.92 24L44 28.7521L38.0446 39.2479L29.96 34.5039L29.9554 44H18.0446L18.04 34.5039L9.95537 39.2479L4 28.7521L12.0799 24Z" fill="#1993e5"></path>
          </svg>
        </div>
        <h2 class="text-xl sm:text-2xl font-bold text-[#111518]">Login to JeevanSetu ID</h2>
      </div>
      <form class="flex flex-col gap-3 sm:gap-4" id="loginForm">
        <div>
          <label class="block text-sm font-medium text-[#111518] mb-1" for="email">Email</label>
          <input class="w-full rounded border border-[#dce1e5] px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#1993e5]" type="email" id="email" name="email" required />
        </div>
        <div>
          <label class="block text-sm font-medium text-[#111518] mb-1" for="password">Password</label>
          <input class="w-full rounded border border-[#dce1e5] px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#1993e5]" type="password" id="password" name="password" required />
        </div>
        <button type="submit" class="w-full bg-[#1993e5] text-white font-bold py-2 rounded-lg mt-2 hover:bg-[#157ac1] transition text-sm sm:text-base">Login</button>
      </form>
      <div id="loginError" class="text-red-500 text-sm text-center mt-2 hidden"></div>
      <div class="text-center mt-4">
        <span class="text-sm text-[#637988]">Don't have an account?</span>
        <a href="register.html" class="text-[#1993e5] text-sm font-medium ml-1 hover:underline">Register</a>
      </div>
    </div>
  </body>
  <script>
    document.getElementById('loginForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const errorDiv = document.getElementById('loginError');
      errorDiv.classList.add('hidden');
      try {
        const res = await fetch('/api/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password })
        });
        const data = await res.json();
        if (res.ok) {
          localStorage.setItem('user', JSON.stringify(data.user));
          window.location.href = 'dashboard.html';
        } else {
          errorDiv.textContent = data.message || 'Login failed.';
          errorDiv.classList.remove('hidden');
        }
      } catch (err) {
        errorDiv.textContent = 'Network error.';
        errorDiv.classList.remove('hidden');
      }
    });
  </script>
</html> 